$(".alert").hide()

<% if params[:new_invoice] %>
    window.location.href = "/invoices/new?invoice_for_client=<%= params[:client_ids].join(",") %>";
<%else%>

<% unless params[:flag]%>
    <% if @action == "archived" or @action == "deleted" %>
        $(".alert.alert-success").show().find('span').html("<%= escape_javascript @message %>");
    <% else %>
        $(".alert.alert-success").show().find('span').html("Client(s) are <%= @action %> successfully");
    <% end %>
<% end %>

<% unless params[:client_ids].blank? %>
$('tbody#client_body').html('<%= escape_javascript render("clients") %>');
$('#bulk_actions').html('<%= escape_javascript render("bulk_actions") %>');
<%end%>


$('#active_links').html('<%= escape_javascript render("filter_links") %>');
$('#active_links a').removeClass('active');
$('.top_links').hide();
<% if @action == "recovered from archived"%>
$('.recover_archived, .destroy_archived').show();
$('.destroy').parent('li').removeClass('grid_control_sep');
$('.get_archived').addClass('active');
<% elsif @action == 'recovered from deleted' %>
$('.recover_deleted').show();
$('.destroy').parent('li').removeClass('grid_control_sep');
$('#active_links a.get_deleted').addClass('active');
<%elsif @action == 'archived' or @action == 'deleted'%>
$('.archive, .destroy, .new_invoice').show();
$('.destroy').parent('li').addClass('grid_control_sep');
$('.get_actives').addClass('active');
<%elsif @action == 'deleted from archived'%>
$('.recover_archived, .destroy_archived').show();
$('.destroy').parent('li').removeClass('grid_control_sep');
$('#active_links a.get_archived').addClass('active');
<%else%>
$('.archive, .destroy, .new_invoice').show();
$('.destroy').parent('li').removeClass('grid_control_sep');
$('.get_actives').addClass('active');
<%end%>
$('#select_all').attr('checked', false);
$('tfoot#paging_links').html('<%= escape_javascript render :partial => "application_partials/paging", :page => params[:page] %>');
$("table.table_listing").trigger('update');

<%end%>
bind_deleted_entry();