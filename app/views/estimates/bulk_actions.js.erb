$('.alert').hide();

<% if @action == "enter payment" %>
<% if @estimate_has_deleted_clients.length > 0 %>
$(".alert.alert-error").show().find('span').html("Please recover clients for estimate(s) with estimate# <%= @estimate_has_deleted_clients.join(",") %> to enter payment");
<% end %>
<%else%>

<% unless params[:flag]%>
<% if @action == "archived" or @action == "deleted" %>
$(".alert.alert-success").show().find('span').html("<%= escape_javascript @message %>");
<%
 if params[:destroy_archived].present?
    status = 'destroy_archived'
 elsif params[:destroy].present?
    status = 'destroy'
 else
    status = ''
 end
%>
<%else%>
$(".alert.alert-success").show().find('span').html("Estimates(s) are <%= @action %> successfully.");
<% end %>
<% end %>

<%if !params[:estimate_ids].blank? && @action != "paid estimates"%>
$('tbody#estimate_body').html('<%= escape_javascript(render :partial=>"estimate") %>');
<%end%>

// Enable/Disable action links(Archive,Delete,Recover). //

$('#active_links').html('<%= escape_javascript render("filter_links") %>');
$('#active_links a').removeClass('active');



$('#select_all').attr('checked', false);

<%if @action != "paid estimates"%>
$('tfoot#paging_links').html('<%= escape_javascript render :partial => "application_partials/paging", :page => params[:page] %>');
$('#bulk_actions').html('<%= escape_javascript render("bulk_actions") %>');
$("table.table_listing").trigger('update');
$(".sent, .partial,.draft, .draft-partial, .paid, .disputed, .viewed").qtip();
//    $(".text-overflow-class").ellipsis({row: 1});
<%end%>

$('.top_links').hide();
<% if @action == "recovered from archived"%>
$('.send').parent("li").removeClass("grid_control_sep");
$('.recover_archived,.destroy_archived,.send, .convert_to_invoice').show();
$('.get_archived').addClass('active');
<% elsif @action == "recovered from deleted" %>
$('.recover_deleted').show().parent("li").removeClass("grid_control_sep");
$('.get_deleted').addClass('active');
<% elsif @action == "deleted from archived" %>
$('.send').parent("li").removeClass("grid_control_sep");
$('.recover_archived,.destroy_archived,.send, .convert_to_invoice').show();
$('#active_links a.get_archived').addClass('active');
<% elsif params[:destroy_archived].present?  %>
$('.send').parent("li").removeClass("grid_control_sep");
$('.recover_archived,.destroy_archived,.send, .convert_to_invoice').show();
$('#active_links a.get_archived').addClass('active');
<%else%>
$('.archive,.destroy,.convert_to_invoice,.send').show();
$('.get_actives').addClass('active');
<%end%>

<%end%>
bind_deleted_entry();