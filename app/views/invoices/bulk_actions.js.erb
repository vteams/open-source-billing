$('.alert').hide();

<% if @action == "enter payment" %>
    <% if @invoice_has_deleted_clients.length > 0 %>
        $(".alert.alert-error").show().find('span').html("Please recover clients for invoice(s) with invoice# <%= @invoice_has_deleted_clients.join(",") %> to enter payment");
    <% else %>
        window.location.href = "/payments/enter_payment?invoice_ids=<%= params[:invoice_ids].join(",") %>&from_invoices=true"
    <% end %>
<%else%>

<% unless params[:flag]%>
    <% if @action == "archived" or @action == "deleted" %>
        $(".alert.alert-success").show().find('span').html("<%= escape_javascript @message %>");
    <%elsif @action == "paid invoices" %>
        $(".alert.alert-error").show().find('span').html("You cannot pay paid invoices.");
    <%elsif @action == "invoices_with_payments" %>
        <%
         if params[:destroy_archived].present?
            status = 'destroy_archived'
         elsif params[:destroy].present?
            status = 'destroy'
         else
            status = ''
         end
        %>
        $(".modal-body").html("<%= escape_javascript(render(:partial=>"invoices_with_payments",:locals=>{:invoices_with_payments =>@invoices_with_payments, action_to_perform: status})) %>");
        $('#invoices_with_payments').modal('show');
    <%else%>
        $(".alert.alert-success").show().find('span').html("Invoice(s) are <%= @action %> successfully.");
    <% end %>
<% end %>

<%if !params[:invoice_ids].blank? && @action != "paid invoices"%>
    $('tbody#invoice_body').html('<%= escape_javascript(render :partial=>"invoice") %>');
<%end%>

// Enable/Disable action links(Archive,Delete,Recover). //

$('#active_links').html('<%= escape_javascript render("filter_links") %>');
$('#active_links a').removeClass('active');



$('#select_all').attr('checked', false);

<%if @action != "paid invoices"%>
    $('tfoot#paging_links').html('<%= escape_javascript render :partial => "application_partials/paging", :page => params[:page] %>');
    $('#bulk_actions').html('<%= escape_javascript render("bulk_actions") %>');
    $("table.table_listing").trigger('update');
    $(".sent, .partial,.draft, .draft-partial, .paid, .disputed, .viewed").qtip();
//    $(".text-overflow-class").ellipsis({row: 1});
<%end%>

$('.top_links').hide();
<% if @action == "recovered from archived"%>
    $('.send').parent("li").removeClass("grid_control_sep");
    $('.recover_archived,.destroy_archived,.send').show();
    $('.get_archived').addClass('active');
<% elsif @action == "recovered from deleted" %>
    $('.recover_deleted').show().parent("li").removeClass("grid_control_sep");
    $('.get_deleted').addClass('active');
<% elsif @action == "deleted from archived" %>
    $('.send').parent("li").removeClass("grid_control_sep");
    $('.recover_archived,.destroy_archived,.send').show();
    $('#active_links a.get_archived').addClass('active');
<% elsif params[:destroy_archived].present?  %>
    $('.send').parent("li").removeClass("grid_control_sep");
    $('.recover_archived,.destroy_archived,.send').show();
    $('#active_links a.get_archived').addClass('active');
<%else%>
    $('.archive,.destroy,.payment,.send').show();
    $('.get_actives').addClass('active');
<%end%>

<%end%>
bind_deleted_entry();